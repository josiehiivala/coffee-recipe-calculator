<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffee Shop Recipe Calculator</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icons as SVG components
        const Plus = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const Trash2 = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="3,6 5,6 21,6"></polyline>
                <path d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
        );

        const Calculator = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect x="4" y="2" width="16" height="20" rx="2"></rect>
                <line x1="8" y1="6" x2="16" y2="6"></line>
                <line x1="16" y1="10" x2="8" y2="10"></line>
                <line x1="8" y1="14" x2="12" y2="14"></line>
                <line x1="16" y1="14" x2="16" y2="14"></line>
                <line x1="8" y1="18" x2="12" y2="18"></line>
                <line x1="16" y1="18" x2="16" y2="18"></line>
            </svg>
        );

        const Save = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="m19,21H5a2,2 0 0,1 -2,-2V5a2,2 0 0,1 2,-2H14l5,5v11a2,2 0 0,1 -2,2z"></path>
                <polyline points="17,21 17,13 7,13 7,21"></polyline>
                <polyline points="7,3 7,8 15,8"></polyline>
            </svg>
        );

        const Edit2 = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="m18.5,2.5a2.121,2.121 0 0,1 3,3L12,15l-4,1 1,-4 9.5,-9.5z"></path>
            </svg>
        );

        const X = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const DollarSign = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
        );

        const Download = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7,10 12,15 17,10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
        );

        const Upload = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17,8 12,3 7,8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
        );

        const Users = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
        );

        const Globe = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="2" y1="12" x2="22" y2="12"></line>
                <path d="M12,2a15.3,15.3 0 0,1 4,10 15.3,15.3 0 0,1 -4,10 15.3,15.3 0 0,1 -4,-10 15.3,15.3 0 0,1 4,-10z"></path>
            </svg>
        );

        const CoffeeRecipeCalculator = () => {
            const [ingredients, setIngredients] = useState([
                { id: 1, name: 'Espresso', cost: 0.25, unit: 'shot', unitSize: 1 },
                { id: 2, name: 'Whole Milk', cost: 0.15, unit: 'oz', unitSize: 1 },
                { id: 3, name: 'Vanilla Syrup', cost: 0.12, unit: 'pump', unitSize: 1 },
                { id: 4, name: 'Whipped Cream', cost: 0.08, unit: 'dollop', unitSize: 1 }
            ]);
            
            const [recipes, setRecipes] = useState([]);
            const [currentRecipe, setCurrentRecipe] = useState({
                name: '',
                ingredients: [],
                totalCost: 0,
                markup: 30
            });

            const [newIngredient, setNewIngredient] = useState({
                name: '',
                cost: '',
                unit: 'oz',
                unitSize: 1
            });

            const [showIngredientForm, setShowIngredientForm] = useState(false);
            const [editingRecipe, setEditingRecipe] = useState(null);
            const [showDataManager, setShowDataManager] = useState(false);
            const [exportData, setExportData] = useState('');
            const [importData, setImportData] = useState('');

            const units = ['oz', 'pump', 'shot', 'cup', 'tsp', 'tbsp', 'dollop', 'item'];

            // Local storage functions
            useEffect(() => {
                const savedIngredients = localStorage.getItem('coffee-ingredients');
                const savedRecipes = localStorage.getItem('coffee-recipes');
                
                if (savedIngredients) {
                    try {
                        const parsed = JSON.parse(savedIngredients);
                        if (parsed.length > 0) {
                            setIngredients(parsed);
                        }
                    } catch (e) {
                        console.log('Error loading ingredients from localStorage');
                    }
                }
                
                if (savedRecipes) {
                    try {
                        setRecipes(JSON.parse(savedRecipes));
                    } catch (e) {
                        console.log('Error loading recipes from localStorage');
                    }
                }
            }, []);

            useEffect(() => {
                localStorage.setItem('coffee-ingredients', JSON.stringify(ingredients));
                localStorage.setItem('coffee-recipes', JSON.stringify(recipes));
            }, [ingredients, recipes]);

            // Export/Import functions
            const exportToJSON = () => {
                const data = {
                    ingredients,
                    recipes,
                    exportDate: new Date().toISOString(),
                    version: '1.0'
                };
                setExportData(JSON.stringify(data, null, 2));
            };

            const downloadExport = () => {
                const data = {
                    ingredients,
                    recipes,
                    exportDate: new Date().toISOString(),
                    version: '1.0'
                };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `coffee-recipes-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            const importFromJSON = () => {
                try {
                    const data = JSON.parse(importData);
                    if (data.ingredients && Array.isArray(data.ingredients)) {
                        setIngredients(data.ingredients);
                    }
                    if (data.recipes && Array.isArray(data.recipes)) {
                        setRecipes(data.recipes);
                    }
                    setImportData('');
                    setShowDataManager(false);
                    alert('Data imported successfully!');
                } catch (err) {
                    alert('Invalid JSON data. Please check the format.');
                }
            };

            const handleFileUpload = (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const data = JSON.parse(e.target.result);
                            if (data.ingredients && Array.isArray(data.ingredients)) {
                                setIngredients(data.ingredients);
                            }
                            if (data.recipes && Array.isArray(data.recipes)) {
                                setRecipes(data.recipes);
                            }
                            alert('File imported successfully!');
                            setShowDataManager(false);
                        } catch (err) {
                            alert('Invalid file format. Please upload a valid JSON file.');
                        }
                    };
                    reader.readAsText(file);
                }
            };

            // Add new ingredient
            const addIngredient = () => {
                if (newIngredient.name && newIngredient.cost) {
                    const ingredient = {
                        id: Date.now(),
                        name: newIngredient.name,
                        cost: parseFloat(newIngredient.cost),
                        unit: newIngredient.unit,
                        unitSize: parseFloat(newIngredient.unitSize) || 1
                    };
                    setIngredients([...ingredients, ingredient]);
                    setNewIngredient({ name: '', cost: '', unit: 'oz', unitSize: 1 });
                    setShowIngredientForm(false);
                }
            };

            // Remove ingredient
            const removeIngredient = (id) => {
                setIngredients(ingredients.filter(ing => ing.id !== id));
            };

            // Add ingredient to current recipe
            const addToRecipe = (ingredient) => {
                const existingIndex = currentRecipe.ingredients.findIndex(
                    item => item.id === ingredient.id
                );

                if (existingIndex >= 0) {
                    const updatedIngredients = [...currentRecipe.ingredients];
                    updatedIngredients[existingIndex].quantity += 1;
                    setCurrentRecipe({
                        ...currentRecipe,
                        ingredients: updatedIngredients
                    });
                } else {
                    setCurrentRecipe({
                        ...currentRecipe,
                        ingredients: [
                            ...currentRecipe.ingredients,
                            { ...ingredient, quantity: 1 }
                        ]
                    });
                }
            };

            // Update ingredient quantity in recipe
            const updateQuantity = (ingredientId, quantity) => {
                if (quantity <= 0) {
                    removeFromRecipe(ingredientId);
                    return;
                }

                const updatedIngredients = currentRecipe.ingredients.map(item =>
                    item.id === ingredientId ? { ...item, quantity: parseFloat(quantity) || 0 } : item
                );
                setCurrentRecipe({
                    ...currentRecipe,
                    ingredients: updatedIngredients
                });
            };

            // Remove ingredient from recipe
            const removeFromRecipe = (ingredientId) => {
                setCurrentRecipe({
                    ...currentRecipe,
                    ingredients: currentRecipe.ingredients.filter(item => item.id !== ingredientId)
                });
            };

            // Calculate total cost
            const calculateTotalCost = () => {
                const total = currentRecipe.ingredients.reduce((sum, item) => {
                    return sum + (item.cost * item.quantity);
                }, 0);
                return total.toFixed(2);
            };

            // Calculate selling price with markup
            const calculateSellingPrice = () => {
                const cost = parseFloat(calculateTotalCost());
                const sellingPrice = cost * (1 + currentRecipe.markup / 100);
                return sellingPrice.toFixed(2);
            };

            // Calculate profit amount
            const calculateProfit = () => {
                const cost = parseFloat(calculateTotalCost());
                const sellingPrice = parseFloat(calculateSellingPrice());
                return (sellingPrice - cost).toFixed(2);
            };

            // Save recipe
            const saveRecipe = () => {
                if (!currentRecipe.name) {
                    alert('Please enter a recipe name');
                    return;
                }

                const recipeToSave = {
                    ...currentRecipe,
                    id: editingRecipe ? editingRecipe.id : Date.now(),
                    totalCost: parseFloat(calculateTotalCost()),
                    sellingPrice: parseFloat(calculateSellingPrice()),
                    profit: parseFloat(calculateProfit())
                };

                if (editingRecipe) {
                    setRecipes(recipes.map(r => r.id === editingRecipe.id ? recipeToSave : r));
                } else {
                    setRecipes([...recipes, recipeToSave]);
                }

                setCurrentRecipe({ name: '', ingredients: [], totalCost: 0, markup: 30 });
                setEditingRecipe(null);
            };

            // Edit recipe
            const editRecipe = (recipe) => {
                setCurrentRecipe(recipe);
                setEditingRecipe(recipe);
            };

            // Delete recipe
            const deleteRecipe = (id) => {
                setRecipes(recipes.filter(r => r.id !== id));
            };

            // Clear current recipe
            const clearRecipe = () => {
                setCurrentRecipe({ name: '', ingredients: [], totalCost: 0, markup: 30 });
                setEditingRecipe(null);
            };

            return (
                <div className="max-w-6xl mx-auto p-6 bg-white min-h-screen">
                    <div className="mb-8">
                        <div className="flex justify-between items-center mb-2">
                            <h1 className="text-3xl font-bold text-gray-800">Coffee Shop Recipe Calculator</h1>
                            <div className="flex items-center gap-4">
                                <div className="flex items-center gap-2 text-green-600">
                                    <Globe />
                                    <span className="text-sm font-medium">GitHub Pages Hosted</span>
                                </div>
                                <button
                                    onClick={() => setShowDataManager(true)}
                                    className="text-sm text-blue-600 hover:underline"
                                >
                                    Share Data
                                </button>
                            </div>
                        </div>
                        <p className="text-gray-600">
                            Data saves locally in your browser. Use "Share Data" to export/import with your team.
                        </p>
                    </div>

                    {/* Data Manager Modal */}
                    {showDataManager && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div className="bg-white rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-xl font-semibold">Share Data with Team</h2>
                                    <button
                                        onClick={() => setShowDataManager(false)}
                                        className="p-1 hover:bg-gray-100 rounded"
                                    >
                                        <X />
                                    </button>
                                </div>
                                
                                <div className="space-y-6">
                                    <div>
                                        <h3 className="font-medium mb-2 flex items-center gap-2">
                                            <Download />
                                            Export Your Data
                                        </h3>
                                        <p className="text-sm text-gray-600 mb-3">
                                            Download your recipes and ingredients to share with team members.
                                        </p>
                                        <div className="flex gap-3">
                                            <button
                                                onClick={downloadExport}
                                                className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2"
                                            >
                                                <Download />
                                                Download File
                                            </button>
                                            <button
                                                onClick={exportToJSON}
                                                className="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700"
                                            >
                                                Copy as Text
                                            </button>
                                        </div>
                                        {exportData && (
                                            <div className="mt-3">
                                                <textarea
                                                    value={exportData}
                                                    readOnly
                                                    rows={8}
                                                    className="w-full p-3 border rounded font-mono text-xs"
                                                />
                                                <p className="text-xs text-gray-500 mt-1">
                                                    Copy this text and share it with your team.
                                                </p>
                                            </div>
                                        )}
                                    </div>
                                    
                                    <div>
                                        <h3 className="font-medium mb-2 flex items-center gap-2">
                                            <Upload />
                                            Import Team Data
                                        </h3>
                                        <p className="text-sm text-gray-600 mb-3">
                                            Import recipes and ingredients from a team member.
                                        </p>
                                        
                                        <div className="space-y-3">
                                            <div>
                                                <label className="block text-sm font-medium mb-1">
                                                    Upload File:
                                                </label>
                                                <input
                                                    type="file"
                                                    accept=".json"
                                                    onChange={handleFileUpload}
                                                    className="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
                                                />
                                            </div>
                                            
                                            <div>
                                                <label className="block text-sm font-medium mb-1">
                                                    Or paste text data:
                                                </label>
                                                <textarea
                                                    value={importData}
                                                    onChange={(e) => setImportData(e.target.value)}
                                                    rows={6}
                                                    className="w-full p-3 border rounded font-mono text-xs"
                                                    placeholder="Paste exported JSON data here..."
                                                />
                                                <button
                                                    onClick={importFromJSON}
                                                    disabled={!importData.trim()}
                                                    className="mt-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50"
                                                >
                                                    Import Data
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <div className="flex items-start gap-3">
                                            <Users className="text-blue-600 mt-1" />
                                            <div>
                                                <h4 className="font-medium text-blue-900 mb-1">Team Collaboration</h4>
                                                <p className="text-sm text-blue-800">
                                                    Share the GitHub Pages URL with your team: everyone can bookmark it and use their own copy. 
                                                    Use export/import to sync recipe updates between team members.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        {/* Left Column - Ingredients */}
                        <div className="space-y-6">
                            <div className="bg-gray-50 p-6 rounded-lg">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-xl font-semibold text-gray-800">Ingredients</h2>
                                    <button
                                        onClick={() => setShowIngredientForm(!showIngredientForm)}
                                        className="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
                                    >
                                        <Plus />
                                        Add Ingredient
                                    </button>
                                </div>

                                {showIngredientForm && (
                                    <div className="mb-4 p-4 bg-white rounded-lg border">
                                        <div className="grid grid-cols-2 gap-3 mb-3">
                                            <input
                                                type="text"
                                                placeholder="Ingredient name"
                                                value={newIngredient.name}
                                                onChange={(e) => setNewIngredient({...newIngredient, name: e.target.value})}
                                                className="px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                            <input
                                                type="number"
                                                step="0.01"
                                                placeholder="Cost per unit"
                                                value={newIngredient.cost}
                                                onChange={(e) => setNewIngredient({...newIngredient, cost: e.target.value})}
                                                className="px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                        </div>
                                        <div className="grid grid-cols-2 gap-3 mb-3">
                                            <select
                                                value={newIngredient.unit}
                                                onChange={(e) => setNewIngredient({...newIngredient, unit: e.target.value})}
                                                className="px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            >
                                                {units.map(unit => (
                                                    <option key={unit} value={unit}>{unit}</option>
                                                ))}
                                            </select>
                                            <input
                                                type="number"
                                                step="0.1"
                                                placeholder="Unit size"
                                                value={newIngredient.unitSize}
                                                onChange={(e) => setNewIngredient({...newIngredient, unitSize: e.target.value})}
                                                className="px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                        </div>
                                        <div className="flex gap-2">
                                            <button
                                                onClick={addIngredient}
                                                className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
                                            >
                                                Add
                                            </button>
                                            <button
                                                onClick={() => setShowIngredientForm(false)}
                                                className="px-4 py-2 bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition-colors"
                                            >
                                                Cancel
                                            </button>
                                        </div>
                                    </div>
                                )}

                                <div className="space-y-2 max-h-64 overflow-y-auto">
                                    {ingredients.map(ingredient => (
                                        <div key={ingredient.id} className="flex justify-between items-center p-3 bg-white rounded-lg border">
                                            <div className="flex-1">
                                                <span className="font-medium">{ingredient.name}</span>
                                                <div className="text-sm text-gray-600">
                                                    ${ingredient.cost.toFixed(2)} per {ingredient.unit}
                                                </div>
                                            </div>
                                            <div className="flex gap-2">
                                                <button
                                                    onClick={() => addToRecipe(ingredient)}
                                                    className="px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors"
                                                >
                                                    Add to Recipe
                                                </button>
                                                <button
                                                    onClick={() => removeIngredient(ingredient.id)}
                                                    className="p-1 text-red-600 hover:bg-red-100 rounded transition-colors"
                                                >
                                                    <Trash2 />
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* Right Column - Recipe Builder */}
                        <div className="space-y-6">
                            <div className="bg-gray-50 p-6 rounded-lg">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-xl font-semibold text-gray-800">
                                        {editingRecipe ? 'Edit Recipe' : 'Recipe Builder'}
                                    </h2>
                                    {currentRecipe.ingredients.length > 0 && (
                                        <button
                                            onClick={clearRecipe}
                                            className="flex items-center gap-2 px-3 py-1 text-gray-600 hover:bg-gray-200 rounded transition-colors"
                                        >
                                            <X />
                                            Clear
                                        </button>
                                    )}
                                </div>

                                <input
                                    type="text"
                                    placeholder="Recipe name (e.g., Large Vanilla Latte)"
                                    value={currentRecipe.name}
                                    onChange={(e) => setCurrentRecipe({...currentRecipe, name: e.target.value})}
                                    className="w-full px-3 py-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                />

                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        Markup Percentage
                                    </label>
                                    <div className="flex items-center gap-2">
                                        <input
                                            type="number"
                                            value={currentRecipe.markup}
                                            onChange={(e) => setCurrentRecipe({...currentRecipe, markup: parseFloat(e.target.value) || 0})}
                                            className="w-20 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            min="0"
                                            step="1"
                                        />
                                        <span className="text-gray-600">%</span>
                                        <span className="text-sm text-gray-500 ml-2">
                                            (Default: 30% for recommended profit margin)
                                        </span>
                                    </div>
                                </div>

                                <div className="space-y-2 mb-4">
                                    {currentRecipe.ingredients.map(item => (
                                        <div key={item.id} className="flex items-center gap-3 p-3 bg-white rounded-lg border">
                                            <div className="flex-1">
                                                <span className="font-medium">{item.name}</span>
                                                <div className="text-sm text-gray-600">${item.cost.toFixed(2)} per {item.unit}</div>
                                            </div>
                                            <div className="flex items-center gap-2">
                                                <input
                                                    type="number"
                                                    step="0.1"
                                                    value={item.quantity}
                                                    onChange={(e) => updateQuantity(item.id, e.target.value)}
                                                    className="w-20 px-2 py-1 border rounded focus:outline-none focus:ring-1 focus:ring-blue-500"
                                                />
                                                <span className="text-sm text-gray-600">{item.unit}</span>
                                                <div className="w-16 text-right text-sm font-medium">
                                                    ${(item.cost * item.quantity).toFixed(2)}
                                                </div>
                                                <button
                                                    onClick={() => removeFromRecipe(item.id)}
                                                    className="p-1 text-red-600 hover:bg-red-100 rounded transition-colors"
                                                >
                                                    <Trash2 />
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                {currentRecipe.ingredients.length > 0 && (
                                    <div className="border-t pt-4">
                                        <div className="bg-white p-4 rounded-lg border mb-4">
                                            <h3 className="text-lg font-semibold mb-3 flex items-center gap-2">
                                                <Calculator />
                                                Cost Breakdown
                                            </h3>
                                            
                                            <div className="space-y-3">
                                                <div className="flex justify-between items-center">
                                                    <span className="text-gray-700">Ingredient Cost:</span>
                                                    <span className="font-medium">${calculateTotalCost()}</span>
                                                </div>
                                                
                                                <div className="flex justify-between items-center">
                                                    <span className="text-gray-700">Markup ({currentRecipe.markup}%):</span>
                                                    <span className="font-medium text-green-600">+${calculateProfit()}</span>
                                                </div>
                                                
                                                <div className="border-t pt-2 flex justify-between items-center">
                                                    <span className="text-lg font-semibold flex items-center gap-2">
                                                        <DollarSign />
                                                        Selling Price:
                                                    </span>
                                                    <span className="text-2xl font-bold text-blue-600">
                                                        ${calculateSellingPrice()}
                                                    </span>
                                                </div>
                                                
                                                <div className="bg-green-50 p-3 rounded-lg">
                                                    <div className="text-sm text-green-800">
                                                        <strong>Profit per drink: ${calculateProfit()}</strong>
                                                    </div>
                                                    <div className="text-xs text-green-600 mt-1">
                                                        Profit margin: {currentRecipe.markup}% • Cost ratio: {(parseFloat(calculateTotalCost()) / parseFloat(calculateSellingPrice()) * 100).toFixed(1)}%
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <button
                                            onClick={saveRecipe}
                                            className="w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
                                        >
                                            <Save />
                                            {editingRecipe ? 'Update Recipe' : 'Save Recipe'}
                                        </button>
                                    </div>
                                )}
                            </div>

                            <div className="bg-gray-50 p-6 rounded-lg">
                                <h2 className="text-xl font-semibold text-gray-800 mb-4">Saved Recipes</h2>
                                <div className="space-y-2 max-h-64 overflow-y-auto">
                                    {recipes.length === 0 ? (
                                        <p className="text-gray-500 text-center py-4">No saved recipes yet</p>
                                    ) : (
                                        recipes.map(recipe => (
                                            <div key={recipe.id} className="flex justify-between items-center p-3 bg-white rounded-lg border">
                                                <div className="flex-1">
                                                    <h3 className="font-medium">{recipe.name}</h3>
                                                    <div className="text-sm text-gray-600">
                                                        Cost: ${recipe.totalCost?.toFixed(2)} • Sell: ${recipe.sellingPrice?.toFixed(2)} • Profit: ${recipe.profit?.toFixed(2)}
                                                    </div>
                                                    <div className="text-xs text-green-600">
                                                        {recipe.markup || 30}% markup
                                                    </div>
                                                </div>
                                                <div className="flex gap-2">
                                                    <button
                                                        onClick={() => editRecipe(recipe)}
                                                        className="p-2 text-blue-600 hover:bg-blue-100 rounded transition-colors"
                                                    >
                                                        <Edit2 />
                                                    </button>
                                                    <button
                                                        onClick={() => deleteRecipe(recipe.id)}
                                                        className="p-2 text-red-600 hover:bg-red-100 rounded transition-colors"
                                                    >
                                                        <Trash2 />
                                                    </button>
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<CoffeeRecipeCalculator />, document.getElementById('root'));
    </script>
</body>
</html>
